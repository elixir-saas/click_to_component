{
  "version": 3,
  "sources": ["../../assets/js/click_to_command/index.js", "../../assets/js/click_to_command/menu.js", "../../assets/js/click_to_command/dom.js"],
  "sourcesContent": ["import { createMenu } from \"./menu\";\nimport { findNearestComments } from \"./dom\";\n\nexport const ClickToEditor = () => {\n  return {\n    mounted() {\n      this.menu = createMenu(this.onMenuClick.bind(this));\n      this.menu.mount();\n\n      document.addEventListener(\"click\", this.onClick.bind(this));\n    },\n\n    onClick(event) {\n      if (event.altKey) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const comments = findNearestComments(event.target);\n\n        this.menu.render(event, comments);\n      }\n    },\n\n    onMenuClick(comment) {\n      this.pushEventTo(this.el, \"click_to_component:open\", {\n        path: comment.path,\n      });\n    },\n  };\n};\n", "export const createMenu = (onClick) => {\n  const el = document.createElement(\"div\");\n\n  Object.assign(el.style, {\n    display: \"none\",\n    position: \"fixed\",\n    top: \"0px\",\n    left: \"0px\",\n    background: \"white\",\n    border: \"1px solid #e4e4e7\",\n    borderRadius: \"8px\",\n    padding: \"8px 0px\",\n  });\n\n  return {\n    mount() {\n      document.body.appendChild(el);\n      document.addEventListener(\"click\", (event) => {\n        if (!el.contains(event.target)) {\n          el.style.display = \"none\";\n        }\n      });\n    },\n\n    render(event, comments) {\n      el.innerHTML = \"\";\n      el.style.top = `${event.clientY}px`;\n      el.style.left = `${event.clientX}px`;\n      el.style.display = \"block\";\n\n      for (const comment of comments) {\n        const commentEl = document.createElement(\"div\");\n\n        Object.assign(commentEl.style, {\n          margin: \"6px 0px\",\n          padding: \"0px 12px\",\n          fontSize: \"14px\",\n          cursor: \"pointer\",\n        });\n\n        commentEl.innerText = comment.component;\n        commentEl.onclick = () => onClick(comment);\n\n        el.appendChild(commentEl);\n      }\n    },\n  };\n};\n", "const parseCommentString = (comment) => {\n  const [component, path] = comment.trim().split(\" \");\n\n  const closing = component.indexOf(\"/\") === 1;\n\n  return {\n    component: closing ? component.slice(2, -1) : component.slice(1, -1),\n    path,\n    closing,\n  };\n};\n\nexport const findNearestComments = (currentEl) => {\n  const accumulated = [];\n  const closed = [];\n\n  while (true) {\n    let node = currentEl.previousSibling;\n\n    while (true) {\n      if (node === null) {\n        break;\n      }\n\n      if (node.nodeType === document.COMMENT_NODE) {\n        const comment = parseCommentString(node.nodeValue);\n\n        if (comment.closing) {\n          closed.unshift(comment);\n        } else if (closed[0]?.component === comment.component) {\n          closed.shift();\n        } else {\n          accumulated.push(comment);\n        }\n      }\n\n      node = node.previousSibling;\n    }\n\n    if (currentEl.parentElement == null) {\n      break;\n    }\n\n    currentEl = currentEl.parentElement;\n  }\n\n  return accumulated;\n};\n"],
  "mappings": ";;;;;;;;;AAAA;AAAA;AAAA;;;ACAO,IAAM,aAAa,CAAC,YAAY;AACrC,QAAM,KAAK,SAAS,cAAc;AAElC,SAAO,OAAO,GAAG,OAAO;AAAA,IACtB,SAAS;AAAA,IACT,UAAU;AAAA,IACV,KAAK;AAAA,IACL,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,QAAQ;AAAA,IACR,cAAc;AAAA,IACd,SAAS;AAAA;AAGX,SAAO;AAAA,IACL,QAAQ;AACN,eAAS,KAAK,YAAY;AAC1B,eAAS,iBAAiB,SAAS,CAAC,UAAU;AAC5C,YAAI,CAAC,GAAG,SAAS,MAAM,SAAS;AAC9B,aAAG,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA,IAKzB,OAAO,OAAO,UAAU;AACtB,SAAG,YAAY;AACf,SAAG,MAAM,MAAM,GAAG,MAAM;AACxB,SAAG,MAAM,OAAO,GAAG,MAAM;AACzB,SAAG,MAAM,UAAU;AAEnB,iBAAW,WAAW,UAAU;AAC9B,cAAM,YAAY,SAAS,cAAc;AAEzC,eAAO,OAAO,UAAU,OAAO;AAAA,UAC7B,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,UAAU;AAAA,UACV,QAAQ;AAAA;AAGV,kBAAU,YAAY,QAAQ;AAC9B,kBAAU,UAAU,MAAM,QAAQ;AAElC,WAAG,YAAY;AAAA;AAAA;AAAA;AAAA;;;AC3CvB,IAAM,qBAAqB,CAAC,YAAY;AACtC,QAAM,CAAC,WAAW,QAAQ,QAAQ,OAAO,MAAM;AAE/C,QAAM,UAAU,UAAU,QAAQ,SAAS;AAE3C,SAAO;AAAA,IACL,WAAW,UAAU,UAAU,MAAM,GAAG,MAAM,UAAU,MAAM,GAAG;AAAA,IACjE;AAAA,IACA;AAAA;AAAA;AAIG,IAAM,sBAAsB,CAAC,cAAc;AAChD,QAAM,cAAc;AACpB,QAAM,SAAS;AAEf,SAAO,MAAM;AACX,QAAI,OAAO,UAAU;AAErB,WAAO,MAAM;AACX,UAAI,SAAS,MAAM;AACjB;AAAA;AAGF,UAAI,KAAK,aAAa,SAAS,cAAc;AAC3C,cAAM,UAAU,mBAAmB,KAAK;AAExC,YAAI,QAAQ,SAAS;AACnB,iBAAO,QAAQ;AAAA,mBACN,OAAO,IAAI,cAAc,QAAQ,WAAW;AACrD,iBAAO;AAAA,eACF;AACL,sBAAY,KAAK;AAAA;AAAA;AAIrB,aAAO,KAAK;AAAA;AAGd,QAAI,UAAU,iBAAiB,MAAM;AACnC;AAAA;AAGF,gBAAY,UAAU;AAAA;AAGxB,SAAO;AAAA;;;AF3CF,IAAM,gBAAgB,MAAM;AACjC,SAAO;AAAA,IACL,UAAU;AACR,WAAK,OAAO,WAAW,KAAK,YAAY,KAAK;AAC7C,WAAK,KAAK;AAEV,eAAS,iBAAiB,SAAS,KAAK,QAAQ,KAAK;AAAA;AAAA,IAGvD,QAAQ,OAAO;AACb,UAAI,MAAM,QAAQ;AAChB,cAAM;AACN,cAAM;AAEN,cAAM,WAAW,oBAAoB,MAAM;AAE3C,aAAK,KAAK,OAAO,OAAO;AAAA;AAAA;AAAA,IAI5B,YAAY,SAAS;AACnB,WAAK,YAAY,KAAK,IAAI,2BAA2B;AAAA,QACnD,MAAM,QAAQ;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
